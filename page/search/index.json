[{"content":"利用DITA Map组织信息 DITA Map是将不同Topic和其他内容资源按照一定的结构组织起来的文档，描述了各个Topic之间的层级和关系，支持通过引用和构建层级关系将不同的Topic或submap组合在一起。根据类型定义（Document Type Definition）的不同，DITA Map的可细分为\u0026lt;map\u0026gt;和\u0026lt;bookmap\u0026gt;，均以.ditamap为后缀。\nDITA Map的应用场景 组织和管理内容：Map可以将不同的DITA文件组织在一起，形成一个有层次结构的文档集合。通过Map，可以在更高级别（如Rootmap）更好地管理内容，方便查找、维护和扩展。 控制文档输出：Map可以指定需要输出的文档、输出的格式以及输出的目标。因此，可以根据需要生成不同的交付物，比如HTML、PDF、EPUB等。 定义文档结构：Map可以定义文档的结构和内容，包括文档的标题、摘要、作者、版权信息等。这些信息可以在生成文档时自动插入到文档中。 定义Keyword：Map提供了一种间接的寻址机制，增强内容的可移植性，如\u0026lt;keydef\u0026gt;。\u0026lt;keydef\u0026gt;是\u0026lt;topicref\u0026gt;的特殊化。 构建Topic关系：使用Map中的主题层次结构、关系表格（\u0026lt;reltable\u0026gt;）等，定义Topic之间或与其他非DITA内容的关系。 支持重用和共享：Map可以引用Submap或DITA文件，实现内容的批量重用和共享。不同的文档可以共享相同的内容，减少重复工作，提高效率。 \u0026lt;map\u0026gt;和\u0026lt;bookmap\u0026gt; \u0026lt;bookmap\u0026gt;是一种特殊的\u0026lt;map\u0026gt;，包括\u0026lt;frontmatter\u0026gt;、\u0026lt;backmatter\u0026gt;、\u0026lt;appendix\u0026gt;、\u0026lt;bookmeta\u0026gt;、\u0026lt;author\u0026gt;等特殊的标记对，多用于组织和管理书籍或其他长篇文档的结构和内容。一般而言，如果需要同源开发生成多个输出格式，如HTML、PDF、CHM，或者想要减少维护工作量，优先考虑使用\u0026lt;map\u0026gt;。\nMap的嵌套 通常，一个DITA Map对应一个用户主题。例如，所有安装主题应该放在一个安装DITA地图中。然而，将整本书或帮助系统的所有主题都包含在一个地图中可能会创建一个笨重的DITA地图。\n为了管理您的内容，而不是为您的产品、服务或技术创建一个庞大的DITA地图，可以在其他DITA地图中嵌套较小的DITA地图来创建子地图。将您的内容分成子地图有助于您管理内容。使用子地图来：\n注：由于目前资料开发使用的样式表仅支持\u0026lt;bookmap\u0026gt;，因此后文仅讨论\u0026lt;bookmap\u0026gt;嵌套submap的情况，即Rootmap均为\u0026lt;bookmap\u0026gt;。\nSubmap的应用场景 有了嵌套，Rootmap主要负责提供文档集合的结构信息，而Submap则指定具体的Topic集合。Submap的主要应用场景包括：\n按章节组织内容：例如，将”安装“部分变成Submap。这样不仅支持后期在其他产品中复用，同时能更好得管理不同Topic集合，尤其是当Topic数量过多时。 协同写作：例如将手册正文划分为不同的submap之后，不同的技术作者只需专注于某一个或某几个章节的内容，无需再最后合并汇总时反复修改Rootmap。 隔离更新频繁的内容：为了减少维护工作量和提高复用效率，可以用单独的DITA Map组织经常更新的内容。 Map嵌套存在的问题 除了前面介绍的应用场景外，还有一种典型的需求：将产品B（通常为可独立阅读和维护的子产品，例如App）的手册内容添加到主产品的Map中，以增加产品手册的完整性，同时便于产品A、产品B的维护和更新。具体而言：\n要求1：在产品A的用户手册中，产品B的主体内容作为其中一章单独出现。 要求2：原产品B手册中的标题层级，在产品A的手册中，均往下降一级（如章标题变成节标题）。 产品A\n\u0026lt;bookmap xml:lang=\u0026#34;en-US\u0026#34;\u0026gt; \u0026lt;booktitle\u0026gt; \u0026lt;mainbooktitle\u0026gt;Product A User Manual\u0026lt;/mainbooktitle\u0026gt; \u0026lt;/booktitle\u0026gt; \u0026lt;chapter href=\u0026#34;topics/Overview.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;topics/Mounting.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;topics/Wiring.dita\u0026#34;/\u0026gt; \u0026lt;/bookmap\u0026gt; 产品B\n\u0026lt;bookmap xml:lang=\u0026#34;en-US\u0026#34;\u0026gt; \u0026lt;booktitle\u0026gt; \u0026lt;mainbooktitle\u0026gt;Product B User Manual\u0026lt;/mainbooktitle\u0026gt; \u0026lt;/booktitle\u0026gt; \u0026lt;chapter href=\u0026#34;topics/Overview.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;topics/Operation.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;topics/Configuration.dita\u0026#34;/\u0026gt; \u0026lt;/bookmap\u0026gt; 第一种情况：在\u0026lt;chapter\u0026gt;中引用\u0026lt;bookmap\u0026gt; 在Rootmap中，先引用不同的Topic作为\u0026lt;chapter\u0026gt;，再在单个\u0026lt;chapter\u0026gt;中引用具体的Submap。这也是通用的做法。\n\u0026lt;bookmap xml:lang=\u0026#34;en-US\u0026#34;\u0026gt; \u0026lt;booktitle\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/booktitle\u0026gt; \u0026lt;chapter href=\u0026#34;Overview.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;Mounting.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;Wiring.dita\u0026#34;/\u0026gt; \u0026lt;chapter href=\u0026#34;Using_productB.dita\u0026#34;\u0026gt; \u0026lt;topicref href=\u0026#34;productB.ditamap\u0026#34; format=\u0026#34;ditamap\u0026#34;/\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;/bookmap\u0026gt; 但是实际操作中，会发现生成输出后，标题层级不符合要求。原来的章标题（L1 Heading），并没有降级为节标题（L2 Heading）。\n第二种情况：直接引用\u0026lt;bookmap\u0026gt; 在Rootmap中，直接设置\u0026lt;chapter\u0026gt;的@href为Submap。\n同样，会发现生成输出后，产品B的内容并没有作为单独一章出现。\n\u0026lt;bookmap xml:lang=\u0026#34;en-US\u0026#34;\u0026gt; \u0026lt;booktitle\u0026gt; \u0026lt;mainbooktitle\u0026gt;Product A User Manual\u0026lt;/mainbooktitle\u0026gt; \u0026lt;/booktitle\u0026gt; \u0026lt;chapter href=\u0026#34;Overview.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;Mounting.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;Wiring.dita\u0026#34;/\u0026gt; \u0026lt;chapter href=\u0026#34;productB.ditamap\u0026#34; format=\u0026#34;ditamap\u0026#34;/\u0026gt; \u0026lt;/bookmap\u0026gt; 第三种情况：\u0026lt;bookmap\u0026gt;引用\u0026lt;map\u0026gt; 根据前两种情况判断，必须以在单个\u0026lt;chapter\u0026gt;中引用具体的Submap为前提，才能满足要求1。此时如果尝试替换产品B的\u0026lt;bookmap\u0026gt;为\u0026lt;map\u0026gt;，会发现条件2也满足了。\n\u0026lt;bookmap xml:lang=\u0026#34;en-US\u0026#34;\u0026gt; \u0026lt;booktitle\u0026gt; \u0026lt;mainbooktitle\u0026gt;Product A User Manual\u0026lt;/mainbooktitle\u0026gt; \u0026lt;/booktitle\u0026gt; \u0026lt;chapter href=\u0026#34;Overview.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;Mounting.dita\u0026#34;\u0026gt; \u0026lt;!-- ... --\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;chapter href=\u0026#34;Using_productB.dita\u0026#34;\u0026gt; \u0026lt;topicref href=\u0026#34;productB.ditamap\u0026#34; format=\u0026#34;ditamap\u0026#34;/\u0026gt; \u0026lt;/chapter\u0026gt; \u0026lt;/bookmap\u0026gt; \u0026lt;map\u0026gt; \u0026lt;title\u0026gt;Product B User Manual\u0026lt;/title\u0026gt; \u0026lt;topicref href=\u0026#34;Overview.dita\u0026#34;/\u0026gt; \u0026lt;topicref href=\u0026#34;Operation.dita\u0026#34;/\u0026gt; \u0026lt;topicref href=\u0026#34;Configuration.dita\u0026#34;/\u0026gt; \u0026lt;/map\u0026gt; \u0026lt;bookmap\u0026gt;还是\u0026lt;map\u0026gt;？ 通过上述分析，可以总结得出：\n在当前的编辑条件下，使用\u0026lt;bookmap\u0026gt;作为Rootmap。 如需在Rootmap中引用多个”章节“，使用\u0026lt;bookmap\u0026gt;。 如需把包含多层Topic嵌套关系的Map（子产品的“Map”）作为一章插入到Rootmap中，使用\u0026lt;map\u0026gt;。 featured image from Unsplush\n","date":"2023-08-09T00:00:00Z","image":"https://fnalways.github.io/post/dita-tips-map-and-bookmap/feature_hu3d03a01dcc18bc5be0e67db3d8d209a6_174927_120x120_fill_q75_box_smart1.jpg","permalink":"https://fnalways.github.io/post/dita-tips-map-and-bookmap/","title":"DITA Tips：Map与Map的嵌套"},{"content":"什么是DITA重用 重用指在多个文档中使用相同内容，优势在于一次创建，多次使用。当源内容有变更时，只需要改动一次，引用该源的内容将同步更新。\n重用的优势 重用是基于DITA进行结构化写作的优势之一。对于写作人员，重用更是利用DITA的主要动机。主要优势包括：\n保证内容和写作风格的一致性 提升写作效率和内容管理效率 节省开发成本 重用的类型 类型 说明 改变目的的重用 针对不同的目的的交付件，重用内容相同的Topic。 简单的元素级重用 使用内容参引或关键词引用。 条件文本 使用条件处理区分在不同的场景下需要出现不同描述的情况。 重用的级别 DITA支持Topic级别的复用、元素级别的复用，结合设计好的条件语句，可以基于同样的内容模块输出面向不同用户、不同渠道的文档。\n级别 说明 完全重用 完全重用表现为内容模块完全一致。常见于同系列产品或同类型文档之间，如产品介绍、常见问题、法律声明等等。 部分重用 部分重用表现为话题一致，但具体内容略有差别。如市场资料的产品介绍部分可稍加修改，直接用在技术资料中。 结构重用 结构重用表现为不同的文档使用相同的内容结构和基本元素。一般而言，同类型的文档存在标准化的内容结构。 最小模块重用 最小模块重用主要体现在短语级别，如术语、产品名称等。 DITA重用的应用场景 结构化开发的过程中，技术作者应主动思考内容重用的潜力。以下仅列举典型的应用场景：\n通用内容：例如公司的联系方式、免责声明等可以在不同的手册中重复使用。 告警说明：产品的操作、维护等部分需要告警说明，而这些说明可以在不同产品线的手册中重复使用。 系列差异：一些产品可能有多个型号，这些型号之间可能有一些细微的差异。但无需为这些差异部分开发独立的手册。 UI文本：UI文本主要出现在对话框、按钮等人机交互界面。在软件开发初期，UI文本往往无法固定。考虑其更新的频率，使用重用可以做到后期统一更新，减少维护成本。 实现DITA重用 前提条件 DITA几乎支持任何颗粒度的重用。内容模块的重用率越高，越值得花时间设计与维护。在规划重用内容模块之前，需考虑如下几点：\n被重用内容的更新频率 被重用内容是否准确、完整 同属性的内容是否可以被重用 被重用内容的文件是否存储在单独的文件中，以便后期维护 基于\u0026lt;conref\u0026gt;重用 \u0026lt;conref\u0026gt;非常灵活，支持重用来自某个源文件的内容片段，如列表、步骤、表格、短语、句子以及段落。\n以重用\u0026lt;uicontrol\u0026gt;为例：\n创建指定用于存储重用元素的DITA文件（仓库），如reuse_uicontrol.dita，id为“resue”。\n在reuse_uicontrol.dita中新增\u0026lt;uicontrol\u0026gt;，确保元素ID易于识别。\n\u0026lt;concept id=\u0026#34;Reuse\u0026#34; xml:lang=\u0026#34;en-US\u0026#34;\u0026gt; \u0026lt;title\u0026gt;forReuse\u0026lt;/title\u0026gt; \u0026lt;conbody\u0026gt; \u0026lt;wintitle id=\u0026#34;home\u0026#34;\u0026gt;Home\u0026lt;/wintitle\u0026gt; \u0026lt;uicontrol id=\u0026#34;sign_up\u0026#34;\u0026gt;Sign up\u0026lt;/uicontrol\u0026gt; \u0026lt;uicontrol id=\u0026#34;u_login\u0026#34;\u0026gt;Login\u0026lt;/uicontrol\u0026gt; \u0026lt;wintitle id=\u0026#34;w_login\u0026#34;\u0026gt;Login\u0026lt;/wintitle\u0026gt; ... \u0026lt;/conbody\u0026gt; \u0026lt;/concept\u0026gt; 在目标Topic文件中，使用\u0026lt;conref\u0026gt;添加不同的\u0026lt;uicontrol\u0026gt;。\n\u0026lt;step\u0026gt; \u0026lt;cmd\u0026gt; Click \u0026lt;uicontrol conref=\u0026#34;reuse_uicontrol.dita#Reuse/sign_up\u0026#34;/\u0026gt; on the \u0026lt;wintitle conref=\u0026#34;.reuse_uicontrol.dita#Reuse/w_login\u0026#34;/\u0026gt; page. \u0026lt;/cmd\u0026gt; \u0026lt;/step\u0026gt; 在根MAP中引用reuse_uicontrol.dita，标记@processing-role为“reference-only”。\n\u0026lt;topicref href=\u0026#34;reuse_uicontrol.dita\u0026#34; processing-role=\u0026#34;resource-only\u0026#34;/\u0026gt; 基于\u0026lt;keyref\u0026gt;重用 \u0026lt;keyref\u0026gt;可以重用简单的变量，如产品名称、产品型号等。\n以重用公司名称为例：\n在DITA MAP中新增关键字定义“company_name”。\n\u0026lt;keydef keys=\u0026#34;company_name\u0026#34;\u0026gt; \u0026lt;topicmeta\u0026gt; \u0026lt;keywords\u0026gt; \u0026lt;keyword\u0026gt;SUNGROW\u0026lt;/keyword\u0026gt; \u0026lt;/keywords\u0026gt; \u0026lt;/topicmeta\u0026gt; \u0026lt;/keydef\u0026gt; 在目标位置，新增\u0026lt;keyword\u0026gt;，选择@keyref。\n\u0026lt;p\u0026gt; It is prohibited to use data contained in firmware or software developed by \u0026lt;keyword keyref=\u0026#34;company_name\u0026#34;/\u0026gt;. \u0026lt;/p\u0026gt; 基于DITAVAL重用（条件发布） 条件处理支持为内容定义受众、版本等其他明显特征，并决定在输出时筛选哪些内容。\n如XYZ产品分为型号A和型号B，仅在拓扑图方面存在差异：\n在\u0026lt;fig\u0026gt;标记对上设置条件及属性。\n\u0026lt;fig id=\u0026#34;A_topology\u0026#34; product=\u0026#34;A\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Model A\u0026lt;/title\u0026gt; \u0026lt;image id=\u0026#34;imageA\u0026#34; href=\u0026#34;img/A_topology.png\u0026#34; width=\u0026#34;70mm\u0026#34;/\u0026gt; \u0026lt;/fig\u0026gt; \u0026lt;fig id=\u0026#34;B_topology\u0026#34; product=\u0026#34;B\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Model B\u0026lt;/title\u0026gt; \u0026lt;image id=\u0026#34;imageB\u0026#34; href=\u0026#34;img/B_topology.png\u0026#34; width=\u0026#34;70mm\u0026#34;/\u0026gt; \u0026lt;/fig\u0026gt; 新增两个DITAVAL文件，ForA.ditaval和ForB.ditaval，分别对应适用于型号1的发布，以及适用于型号2的发布。\nForA.ditaval\n\u0026lt;val\u0026gt; \u0026lt;prop action=\u0026#34;exclude\u0026#34; att=\u0026#34;product\u0026#34; val=\u0026#34;B\u0026#34;/\u0026gt; \u0026lt;/val\u0026gt; ForB.ditaval\n\u0026lt;val\u0026gt; \u0026lt;prop action=\u0026#34;exclude\u0026#34; att=\u0026#34;product\u0026#34; val=\u0026#34;A\u0026#34;/\u0026gt; \u0026lt;/val\u0026gt; 在发布时，选择需要应用的DITAVAL文件。\n基于DITAMAP重用 DITAMAP通过引用和层级关系已将多个Topic组合在一起。对于可重用的、且构成层级关系的组合内容，可以先整合为一个MAP，然后在根MAP中引用。在后续文章中，将具体介绍bookmap相互引用时的注意事项。\n","date":"2023-08-02T00:00:00Z","image":"https://fnalways.github.io/post/dita-tips-reuse/feature_hu3d03a01dcc18bc5be0e67db3d8d209a6_293171_120x120_fill_q75_box_smart1.jpg","permalink":"https://fnalways.github.io/post/dita-tips-reuse/","title":"DITA Tips：重用技巧"}]