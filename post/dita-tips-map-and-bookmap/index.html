<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="介绍了如何使用DITA Map组织和管理内容，以及Map的应用场景和内容模型。同时，还讨论了Map的嵌套存在的问题和解决办法。"><title>DITA Tips：Map与Map的嵌套</title><link rel=canonical href=https://fnalways.github.io/post/dita-tips-map-and-bookmap/><link rel=stylesheet href=/scss/style.min.ff300df33b80e2ac49809c825614392ed1c7b27591d65d3c4043602cd162e25f.css><meta property="og:title" content="DITA Tips：Map与Map的嵌套"><meta property="og:description" content="介绍了如何使用DITA Map组织和管理内容，以及Map的应用场景和内容模型。同时，还讨论了Map的嵌套存在的问题和解决办法。"><meta property="og:url" content="https://fnalways.github.io/post/dita-tips-map-and-bookmap/"><meta property="og:site_name" content="Yajing Wang"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2023-08-09T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-09T00:00:00+00:00"><meta property="og:image" content="https://fnalways.github.io/post/dita-tips-map-and-bookmap/feature.jpg"><meta name=twitter:title content="DITA Tips：Map与Map的嵌套"><meta name=twitter:description content="介绍了如何使用DITA Map组织和管理内容，以及Map的应用场景和内容模型。同时，还讨论了Map的嵌套存在的问题和解决办法。"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fnalways.github.io/post/dita-tips-map-and-bookmap/feature.jpg"><script async src="https://www.googletagmanager.com/gtag/js?id=G-NJFCX2TNBX"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NJFCX2TNBX")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu2de5764a79e0b583410a5f7b5c5f7799_478418_300x0_resize_box_3.png width=300 height=391 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Yajing Wang</a></h1><h2 class=site-description></h2></div></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/page/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/page/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/page/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/page/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/dita-tips-map-and-bookmap/><img src=/post/dita-tips-map-and-bookmap/feature_hu3d03a01dcc18bc5be0e67db3d8d209a6_174927_800x0_resize_q75_box.jpg srcset="/post/dita-tips-map-and-bookmap/feature_hu3d03a01dcc18bc5be0e67db3d8d209a6_174927_800x0_resize_q75_box.jpg 800w, /post/dita-tips-map-and-bookmap/feature_hu3d03a01dcc18bc5be0e67db3d8d209a6_174927_1600x0_resize_q75_box.jpg 1600w" width=800 height=1067 loading=lazy alt="Featured image of post DITA Tips：Map与Map的嵌套"></a></div><div class=article-details><header class=article-category><a href=/categories/dita/ style=background-color:#2a9d8f;color:#fff>DITA</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/dita-tips-map-and-bookmap/>DITA Tips：Map与Map的嵌套</a></h2><h3 class=article-subtitle>介绍了如何使用DITA Map组织和管理内容，以及Map的应用场景和内容模型。同时，还讨论了Map的嵌套存在的问题和解决办法。</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Aug 09, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>1 minute read</time></div></footer></div></header><section class=article-content><h1 id=利用dita-map组织信息>利用DITA Map组织信息</h1><p>DITA Map是将不同Topic和其他内容资源按照一定的结构组织起来的文档，描述了各个Topic之间的层级和关系，支持通过引用和构建层级关系将不同的Topic或submap组合在一起。根据类型定义（Document Type Definition）的不同，DITA Map的可细分为<code>&lt;map></code>和<code>&lt;bookmap></code>，均以<code>.ditamap</code>为后缀。</p><h2 id=dita-map的应用场景>DITA Map的应用场景</h2><ul><li><strong>组织和管理内容</strong>：Map可以将不同的DITA文件组织在一起，形成一个有层次结构的文档集合。通过Map，可以在更高级别（如Rootmap）更好地管理内容，方便查找、维护和扩展。</li><li><strong>控制文档输出</strong>：Map可以指定需要输出的文档、输出的格式以及输出的目标。因此，可以根据需要生成不同的交付物，比如HTML、PDF、EPUB等。</li><li><strong>定义文档结构</strong>：Map可以定义文档的结构和内容，包括文档的标题、摘要、作者、版权信息等。这些信息可以在生成文档时自动插入到文档中。</li><li><strong>定义Keyword</strong>：Map提供了一种间接的寻址机制，增强内容的可移植性，如<code>&lt;keydef></code>。<code>&lt;keydef></code>是<code>&lt;topicref></code>的特殊化。</li><li><strong>构建Topic关系</strong>：使用Map中的主题层次结构、关系表格（<code>&lt;reltable></code>）等，定义Topic之间或与其他非DITA内容的关系。</li><li><strong>支持重用和共享</strong>：Map可以引用Submap或DITA文件，实现内容的批量重用和共享。不同的文档可以共享相同的内容，减少重复工作，提高效率。</li></ul><p><img src=/post/dita-tips-map-and-bookmap/img/dita-map-illustration.png width=393 height=481 srcset="/post/dita-tips-map-and-bookmap/img/dita-map-illustration_huff28b9d249fc08b7747ccf592597f6f8_19157_480x0_resize_box_3.png 480w, /post/dita-tips-map-and-bookmap/img/dita-map-illustration_huff28b9d249fc08b7747ccf592597f6f8_19157_1024x0_resize_box_3.png 1024w" loading=lazy alt="Map organizes topics and submaps" class=gallery-image data-flex-grow=81 data-flex-basis=196px></p><h2 id=map和bookmap><code>&lt;map></code>和<code>&lt;bookmap></code></h2><p><code>&lt;bookmap></code>是一种特殊的<code>&lt;map></code>，包括<code>&lt;frontmatter></code>、<code>&lt;backmatter></code>、<code>&lt;appendix></code>、<code>&lt;bookmeta></code>、<code>&lt;author></code>等特殊的标记对，多用于组织和管理书籍或其他长篇文档的结构和内容。一般而言，如果需要同源开发生成多个输出格式，如HTML、PDF、CHM，或者想要减少维护工作量，优先考虑使用<code>&lt;map></code>。</p><h1 id=map的嵌套>Map的嵌套</h1><p>通常，一个DITA Map对应一个用户主题。例如，所有安装主题应该放在一个安装DITA地图中。然而，将整本书或帮助系统的所有主题都包含在一个地图中可能会创建一个笨重的DITA地图。</p><p>为了管理您的内容，而不是为您的产品、服务或技术创建一个庞大的DITA地图，可以在其他DITA地图中嵌套较小的DITA地图来创建子地图。将您的内容分成子地图有助于您管理内容。使用子地图来：</p><p>注：由于目前资料开发使用的样式表仅支持<code>&lt;bookmap></code>，因此后文仅讨论<code>&lt;bookmap></code>嵌套submap的情况，即Rootmap均为<code>&lt;bookmap></code>。</p><h2 id=submap的应用场景>Submap的应用场景</h2><p>有了嵌套，Rootmap主要负责提供文档集合的结构信息，而Submap则指定具体的Topic集合。Submap的主要应用场景包括：</p><ul><li><strong>按章节组织内容</strong>：例如，将”安装“部分变成Submap。这样不仅支持后期在其他产品中复用，同时能更好得管理不同Topic集合，尤其是当Topic数量过多时。</li><li><strong>协同写作</strong>：例如将手册正文划分为不同的submap之后，不同的技术作者只需专注于某一个或某几个章节的内容，无需再最后合并汇总时反复修改Rootmap。</li><li><strong>隔离更新频繁的内容</strong>：为了减少维护工作量和提高复用效率，可以用单独的DITA Map组织经常更新的内容。</li></ul><h2 id=map嵌套存在的问题>Map嵌套存在的问题</h2><p>除了前面介绍的应用场景外，还有一种典型的需求：将产品B（通常为可独立阅读和维护的子产品，例如App）的手册内容添加到主产品的Map中，以增加产品手册的完整性，同时便于产品A、产品B的维护和更新。具体而言：</p><ul><li><strong>要求1</strong>：在产品A的用户手册中，产品B的主体内容作为其中一章单独出现。</li><li><strong>要求2</strong>：原产品B手册中的标题层级，在产品A的手册中，均往下降一级（如章标题变成节标题）。</li></ul><p>产品A</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bookmap</span> <span style=color:#a6e22e>xml:lang=</span><span style=color:#e6db74>&#34;en-US&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;booktitle&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;mainbooktitle&gt;</span>Product A User Manual<span style=color:#f92672>&lt;/mainbooktitle&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/booktitle&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;topics/Overview.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;topics/Mounting.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;topics/Wiring.dita&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bookmap&gt;</span>
</span></span></code></pre></div><p>产品B</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bookmap</span> <span style=color:#a6e22e>xml:lang=</span><span style=color:#e6db74>&#34;en-US&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;booktitle&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;mainbooktitle&gt;</span>Product B User Manual<span style=color:#f92672>&lt;/mainbooktitle&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/booktitle&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;topics/Overview.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;topics/Operation.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;topics/Configuration.dita&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bookmap&gt;</span>
</span></span></code></pre></div><h3 id=第一种情况在chapter中引用bookmap>第一种情况：在<code>&lt;chapter></code>中引用<code>&lt;bookmap></code></h3><p>在Rootmap中，先引用不同的Topic作为<code>&lt;chapter></code>，再在单个<code>&lt;chapter></code>中引用具体的Submap。这也是通用的做法。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bookmap</span> <span style=color:#a6e22e>xml:lang=</span><span style=color:#e6db74>&#34;en-US&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;booktitle&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/booktitle&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Overview.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Mounting.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Wiring.dita&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Using_productB.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;topicref</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;productB.ditamap&#34;</span> <span style=color:#a6e22e>format=</span><span style=color:#e6db74>&#34;ditamap&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bookmap&gt;</span>
</span></span></code></pre></div><p>但是实际操作中，会发现生成输出后，标题层级不符合要求。原来的章标题（L1 Heading），并没有降级为节标题（L2 Heading）。</p><p><img src=/post/dita-tips-map-and-bookmap/img/chapter-references-bookmap.png width=262 height=203 srcset="/post/dita-tips-map-and-bookmap/img/chapter-references-bookmap_hu5620569528c00889516c229d2c174abe_6821_480x0_resize_box_3.png 480w, /post/dita-tips-map-and-bookmap/img/chapter-references-bookmap_hu5620569528c00889516c229d2c174abe_6821_1024x0_resize_box_3.png 1024w" loading=lazy alt="When referencing bookmap in chapter, the section numbering is wrong" class=gallery-image data-flex-grow=129 data-flex-basis=309px></p><p><img src=/post/dita-tips-map-and-bookmap/img/chapter-references-bookmap-illustration.png width=1392 height=1232 srcset="/post/dita-tips-map-and-bookmap/img/chapter-references-bookmap-illustration_hu49f2db13f2c108dfcf326a0a0833ec1b_133676_480x0_resize_box_3.png 480w, /post/dita-tips-map-and-bookmap/img/chapter-references-bookmap-illustration_hu49f2db13f2c108dfcf326a0a0833ec1b_133676_1024x0_resize_box_3.png 1024w" loading=lazy alt="How DITA interprets the situation" class=gallery-image data-flex-grow=112 data-flex-basis=271px></p><h3 id=第二种情况直接引用bookmap>第二种情况：直接引用<code>&lt;bookmap></code></h3><p>在Rootmap中，直接设置<code>&lt;chapter></code>的<code>@href</code>为Submap。</p><p>同样，会发现生成输出后，产品B的内容并没有作为单独一章出现。</p><p><img src=/post/dita-tips-map-and-bookmap/img/directly-reference-bookmap.png width=261 height=183 srcset="/post/dita-tips-map-and-bookmap/img/directly-reference-bookmap_hu8580eab84b9ec6abd2158bfd51d6bcd3_5506_480x0_resize_box_3.png 480w, /post/dita-tips-map-and-bookmap/img/directly-reference-bookmap_hu8580eab84b9ec6abd2158bfd51d6bcd3_5506_1024x0_resize_box_3.png 1024w" loading=lazy alt="When directly referencing bookmap, the headings of submap content are not demoted" class=gallery-image data-flex-grow=142 data-flex-basis=342px></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bookmap</span> <span style=color:#a6e22e>xml:lang=</span><span style=color:#e6db74>&#34;en-US&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;booktitle&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;mainbooktitle&gt;</span>Product A User Manual<span style=color:#f92672>&lt;/mainbooktitle&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/booktitle&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Overview.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Mounting.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Wiring.dita&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;productB.ditamap&#34;</span> <span style=color:#a6e22e>format=</span><span style=color:#e6db74>&#34;ditamap&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bookmap&gt;</span>
</span></span></code></pre></div><h3 id=第三种情况bookmap引用map>第三种情况：<code>&lt;bookmap></code>引用<code>&lt;map></code></h3><p>根据前两种情况判断，必须以在单个<code>&lt;chapter></code>中引用具体的Submap为前提，才能满足要求1。此时如果尝试替换产品B的<code>&lt;bookmap></code>为<code>&lt;map></code>，会发现条件2也满足了。</p><p><img src=/post/dita-tips-map-and-bookmap/img/bookmap-references-map.png width=237 height=244 srcset="/post/dita-tips-map-and-bookmap/img/bookmap-references-map_hua6508f23e10ec6461d1e603d8c1b58f5_6016_480x0_resize_box_3.png 480w, /post/dita-tips-map-and-bookmap/img/bookmap-references-map_hua6508f23e10ec6461d1e603d8c1b58f5_6016_1024x0_resize_box_3.png 1024w" loading=lazy alt="When referencing map in bookmap, the output is normal" class=gallery-image data-flex-grow=97 data-flex-basis=233px></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bookmap</span> <span style=color:#a6e22e>xml:lang=</span><span style=color:#e6db74>&#34;en-US&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;booktitle&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;mainbooktitle&gt;</span>Product A User Manual<span style=color:#f92672>&lt;/mainbooktitle&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/booktitle&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Overview.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Mounting.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;chapter</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Using_productB.dita&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;topicref</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;productB.ditamap&#34;</span> <span style=color:#a6e22e>format=</span><span style=color:#e6db74>&#34;ditamap&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/chapter&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bookmap&gt;</span>
</span></span></code></pre></div><p><img src=/post/dita-tips-map-and-bookmap/img/bookmap-references-map-illustration.png width=1391 height=581 srcset="/post/dita-tips-map-and-bookmap/img/bookmap-references-map-illustration_hu204c6c9cef96a670b11cf03947739818_71272_480x0_resize_box_3.png 480w, /post/dita-tips-map-and-bookmap/img/bookmap-references-map-illustration_hu204c6c9cef96a670b11cf03947739818_71272_1024x0_resize_box_3.png 1024w" loading=lazy alt="How DITA interprets the situation" class=gallery-image data-flex-grow=239 data-flex-basis=574px></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;map&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;title&gt;</span>Product B User Manual<span style=color:#f92672>&lt;/title&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;topicref</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Overview.dita&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;topicref</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Operation.dita&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;topicref</span> <span style=color:#a6e22e>href=</span><span style=color:#e6db74>&#34;Configuration.dita&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/map&gt;</span>
</span></span></code></pre></div><h2 id=bookmap还是map><code>&lt;bookmap></code>还是<code>&lt;map></code>？</h2><p>通过上述分析，可以总结得出：</p><ul><li>在当前的编辑条件下，使用<code>&lt;bookmap></code>作为Rootmap。</li><li>如需在Rootmap中引用多个”章节“，使用<code>&lt;bookmap></code>。</li><li>如需把包含多层Topic嵌套关系的Map（子产品的“Map”）作为一章插入到Rootmap中，使用<code>&lt;map></code>。</li></ul><p><em>featured image from <a class=link href="https://unsplash.com/photos/a-close-up-of-a-cell-phone-with-a-blurry-background-BJFRrEkkV9c?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditShareLink" target=_blank rel=noopener>Unsplush</a></em></p></section><footer class=article-footer></footer></article><footer class=site-footer><section class=copyright>&copy;
2023 Yajing Wang</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.17.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>